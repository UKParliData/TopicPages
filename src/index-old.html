<!-- OBSOLETE: replaced by index.html -->
<!DOCTYPE html>
<html>
    <head>
        <title>Topic Pages</title>
        <link rel="stylesheet" type="text/css" href="assets/css/style.css" />
    </head>
    <body>
        <header id="main-header">
            <h1>
                Topical - browse Parliamentary data by topic
            </h1>
        </header>

        <div id="all" data-bind="css: { 'topic-selected': selectedTopic() != null }" >
            <!-- ko template: { name: 'container-template' } --><!-- /ko -->
            <div id="loading" data-bind="visible: loading.inProgress()">
                <p>Loading</p>
                <img src="assets/images/ajax-loader.gif" alt="Loading..." />
            </div>
        </div>

        <footer id="main-footer">
            Copyright 2015, Houses of Parliament
        </footer>
    </body>


    <script type="text/html" id="container-template">
        <div id="container" data-bind="if: !loading.inProgress()">
            <div id="selection" data-bind="template: { name: selectorView }"></div>
            <div id="stage" data-bind="template: { name: topLevelView }"></div>
        </div>
    </script>


    <!-- ====== Intro template ====== -->

    <!--
        Displayed when initialising the application.
        Rendered in: top level view
        Context: Navigator.
    -->

    <script type="text/html" id="intro-template">
        <div id="loading">
            <h1>Welcome</h1>
            <p>
                Choose a topic to start exploring our data.
            </p>
        </div>
    </script>


    <!-- ====== App template ====== -->
    <!--
        Displayed when the application has fully loaded
        Rendered in: top level view
        Context: Navigator
    -->

    <script type="text/html" id="app-template">
        <h1>
            <!-- ko if: selectedConfig() != null -->
                <!-- ko text: selectedConfig().title --><!-- /ko -->
            -
            <!-- /ko -->
            <!-- ko text: selectedTopicName() --><!-- /ko -->
            <a class="change-topic-button" href="#" data-bind="click: goToTopicPicker">Change topic</a>
        </h1>
        <div data-bind="
            component: { name: moduleOfSelectedComponent },
            visible: !componentLoading()
        "></div>
        <div class="spinner" data-bind="
            visible: componentLoading,
            template: { name: 'component-loading-template' }
        "></div>
    </script>


    <!-- ====== Topic selector template ====== -->
    <!--
        Displayed when selecting a topic.
        Rendered in: App template
        Context: Navigator
    -->

    <script type="text/html" id="topic-selector-template">
        <div id="selector" data-bind="
            accordion: { active: false, collapsible: true, heightStyle: 'content' },
            foreach: rootTopics">
            <h3 data-bind="text: name"></h3>
            <!-- ko template: 'childTopics-template' --><!-- /ko -->
        </div>
    </script>

    <!-- ====== Child topics template ====== -->
    <!--
        Displayed when selecting a topic.
        Rendered: recursively in Search template and self
        Context: a topic.
    -->

    <script type="text/html" id="childTopics-template">
        <ul data-bind="foreach: children">
            <li>
                <a href="#" data-bind="text: name, click: select"></a>
                <!-- ko template: 'childTopics-template' --><!-- /ko -->
            </li>
        </ul>
    </script>


    <!-- ====== Component loading template ====== -->
    <!--
        Displayed when a result view is being loaded.
        Rendered in: App template.
        Context: Not used.
    -->

    <script type="text/html" id="component-loading-template">
        <img src="assets/images/ajax-loader.gif" alt="Loading..." />
    </script>

    <script src="assets/lib/requirejs/require.js" data-main="assets/js/main"></script>
</html>
