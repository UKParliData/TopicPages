<!DOCTYPE html>
<html>
    <head>
        <title>Topic Pages</title>
        <link rel="stylesheet" type="text/css" href="assets/css/style.css" />
    </head>
    <body>
        <header id="main-header">
            <h1>
                Topical - browse Parliamentary data by topic
            </h1>
            <div id="navigation">
                <ul data-bind="foreach: pages" id="nav-links">
                    <li data-bind="css: css">
                        <a href="#" data-bind="
                            click: $parent.gotoPage,
                            attr: {
                                title: pageTitle
                            }
                        ">
                            <img data-bind="attr: { src: 'assets/images/nav/' + target + '.jpg' }" />
                            <div class="nav-page-title" data-bind="text: pageTitle"></div>
                        </a>
                    </li>
                </ul>
            </div>
        </header>

        <div id="all" data-bind="template: { name: topLevelView }"></div>

        <footer id="main-footer">
            Copyright 2015, Houses of Parliament
        </footer>
    </body>

    <script type="text/html" id="app-template">
        <div id="stage">

            <h1 data-bind="if: selectedConfig() != null">
                <!-- ko text: selectedConfig().title --><!-- /ko -->
                -
                <!-- ko text: selectedTopicName() --><!-- /ko -->
            </h1>
            <div data-bind="
                component: { name: moduleOfSelectedComponent },
                visible: !componentLoading()
            "></div>
            <div class="spinner" data-bind="
                visible: componentLoading,
                template: { name: 'component-loading-template' }
            "></div>
        </div>
    </script>

    <script type="text/html" id="loading-template">
        <div id="loading">
            <p>Loading topics</p>
            <p>
                <progress data-bind="attr: { max: loading.expected(), value: loading.loaded() }">
                </progress>
            </p>
        </div>
    </script>

    <script type="text/html" id="childTopics-template">
        <ul data-bind="foreach: children">
            <li>
                <a href="#" data-bind="text: name, click: select"></a>
                <!-- ko template: 'childTopics-template' --><!-- /ko -->
            </li>
        </ul>
    </script>

    <script type="text/html" id="search-template">
        <div class="accordion" data-bind="foreach: rootTopics">
            <h3 data-bind="text: name"></h3>
            <!-- ko template: 'childTopics-template' --><!-- /ko -->
        </div>
    </script>

    <script type="text/html" id="component-loading-template">
        <img src="assets/images/ajax-loader.gif" alt="Loading..." />
    </script>

    <script src="assets/lib/requirejs/require.js" data-main="assets/js/main"></script>
</html>
