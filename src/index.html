<!DOCTYPE html>
<html>
    <head>
        <title>Topic Pages</title>
        <link rel="stylesheet" type="text/css" href="assets/css/style.css" />
    </head>
    <body>
        <header id="main-header">
            <h1>
                Topical - browse Parliamentary data by topic
            </h1>
        </header>

        <div id="all">
            <div id="selection">
                <div id="loading" data-bind="visible: loading.inProgress(), template: { name: 'loading-template' }"></div>

                <div id="search" data-bind="visible: !loading.inProgress(), template: { name: 'search-template' }"></div>

                <div id="navigation" data-bind="visible: selectedTopic() != null">
                    <ul data-bind="foreach: pages">
                        <li>
                            <a href="#" data-bind="click: $parent.gotoPage, text: pageTitle"></a>
                        </li>
                    </ul>
                </div>
            </div>

            <div id="stage">
                <h1 data-bind="if: selectedConfig() != null">
                    <!-- ko text: selectedConfig().title --><!-- /ko -->
                    -
                    <!-- ko text: selectedTopicName() --><!-- /ko -->
                </h1>
                <div data-bind="component: { name: moduleOfSelectedComponent }, visible: !componentLoading()"></div>
                <div data-bind="visible: componentLoading, template: { name: 'component-loading-template' } " class="spinner">
                </div>
            </div>
        </div>

        <footer id="main-footer">
            Copyright 2015, Houses of Parliament
        </footer>

    </body>

    <script type="text/html" id="loading-template">
        <progress data-bind="attr: { max: loading.expected(), value: loading.loaded() }"></progress>
    </script>

    <script type="text/html" id="search-template">
        <select
            data-bind="
                enable: (topics().length > 0),
                value: selectedTopic,
                optionsText: 'name',
                optionsValue: 'uri',
                options: topics,
                optionsCaption: 'Choose a topic',
                selectize: {}"
            class="term-selector"></select>
    </script>

    <script type="text/html" id="component-loading-template">
        <img src="assets/images/ajax-loader.gif" alt="Loading..." />
    </script>

    <script src="assets/lib/requirejs/require.js" data-main="assets/js/main"></script>
</html>
